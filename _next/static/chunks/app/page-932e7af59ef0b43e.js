(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8032:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,8335,23)),Promise.resolve().then(a.t.bind(a,7209,23)),Promise.resolve().then(a.t.bind(a,2259,23)),Promise.resolve().then(a.bind(a,341))},341:(e,t,a)=>{"use strict";a.d(t,{AppBadge:()=>F});var n=a(7573),s=a(3548),l=a(7653);let i=()=>navigator.vendor.startsWith("Apple"),r=()=>"matchMedia"in window&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: window-controls-overlay)").matches,o=()=>"Notification"in window,d=()=>"https:"===location.protocol&&o()&&r()&&navigator&&"setAppBadge"in navigator,c=async()=>{let{state:e}=await navigator.permissions.query({name:"notifications"});return e},p=async()=>{let e=await Notification.requestPermission();return"default"!==e?e:"denied"},u=e=>async function(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];let s=w();if(!(e in navigator)||"denied"===s)throw new DOMException("Badge API not supported");if(!("unknown"!==s||await c()!=="granted"))throw new DOMException("Badge API permission denied");return await navigator[e](...a)},m=u("clearAppBadge"),f=u("setAppBadge"),w=()=>d()?i()?"unknown":"granted":"denied",x=async()=>{let e=w();return"unknown"===e&&(e=await c()),"prompt"===e&&(e=await p()),"denied"!==e},h=()=>Error("Badge API not supported"),g=e=>async()=>{throw h()},b={isAppBadgeSupported:()=>!1,clearAppBadge:g("clearAppBadge"),setAppBadge:g("setAppBadge"),requestAppBadgePermission:async()=>!1},v={isAppBadgeSupported:d,clearAppBadge:m,setAppBadge:f,requestAppBadgePermission:x},y=()=>b,A=()=>v,B=()=>()=>{},N=()=>{},j=function(){let{favIcon:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{favIcon:!1},{setAppBadge:t,clearAppBadge:n,isAppBadgeSupported:s,requestAppBadgePermission:i}=(0,l.useSyncExternalStore)(B,A,y),[r,o]=(0,l.useState)(),[d,c]=(0,l.useState)(0),[p,u]=(0,l.useState)(""),m=!!e,{src:f,badgeColor:x,badgeSize:g,textColor:b,updateMeta:v}=e||{},j=null==v||v,I=(0,l.useCallback)(async()=>{try{let e=await i();return o(e),e}catch(e){throw o(!1),e}},[i]),S=(0,l.useCallback)(()=>{let e=w();if("unknown"!==e)return"granted"===e;if(void 0===r)throw h();return r},[r]),k=(0,l.useCallback)(async e=>{try{await t(e)}catch(e){if(!m)throw e}c("number"!=typeof e||e)},[m,t]),C=(0,l.useCallback)(async()=>{try{await n()}catch(e){if(!m)throw e}c(0)},[n,m]),E=(0,l.useMemo)(()=>({set:k,clear:C,requestPermission:I,isAllowed:S,isSupported:s,count:d,countAsNumber:Number(d),icon:p}),[k,C,I,S,s,d,p]);return(0,l.useEffect)(()=>()=>{E.clear().catch(N)},[E.clear]),(0,l.useEffect)(()=>{if("granted"!==w()&&m){if("boolean"!=typeof d&&d<=0){u(f);return}(async()=>{let{generateIconFor:e}=await a.e(980).then(a.bind(a,1980));u(await e({src:f,content:d,badgeColor:x,badgeSize:g,textColor:b}))})().catch(N)}},[m,d,f,x,g,b,S]),(0,l.useEffect)(()=>{let e;if(!m)return;let t=()=>document.querySelector('link[rel="icon"]:not([media])')||{};if(j&&p){let a=t();a&&(void 0===e&&(e=a.href),a.href=p)}return()=>{let a=t();a&&void 0!==e&&(a.href=e)}},[p,j,m]),E};var I=a(8200),S=a(7070);let k={loaded:!1,didPromptInstall:!1,canInstall:!1,install:()=>{},status:"unsupported"},C=k,E=e=>!!e&&"userChoice"in e,P=e=>{let t=()=>{};if(!("BeforeInstallPromptEvent"in window))return C={...C,loaded:!0},t;if("matchMedia"in window&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: window-controls-overlay)").matches)return C={...C,loaded:!0,status:"install"},t;let a=null;"onappinstalled"in window&&(a=setTimeout(()=>{C={...C,status:"install-not-open",loaded:!0,canInstall:!1},e()},350));let n=t=>{"number"==typeof a&&(clearTimeout(a),a=null),E(t)&&!C.canInstall&&(C={...C,loaded:!0,canInstall:!0,status:"initial",install:()=>{let a=async()=>{C={...C,didPromptInstall:!0,loaded:!0};let{outcome:a}=await t.prompt();"dismissed"===a&&(C={...C,status:"denied"}),e()};C.didPromptInstall||a()}},e()),t.preventDefault()},s=()=>{C={...C,loaded:!0,status:"install"},e()};return window.addEventListener("beforeinstallprompt",n),window.addEventListener("appinstalled",s),()=>{window.removeEventListener("beforeinstallprompt",n),window.removeEventListener("appinstalled",s),C=k}},_=()=>C,q=()=>{let e;let t=(0,s.c)(3),{install:a,loaded:n,status:i}=(0,l.useSyncExternalStore)(P,_,_),r=n?i:"loading";return t[0]!==a||t[1]!==r?(e={install:a,status:r},t[0]=a,t[1]=r,t[2]=e):e=t[2],e},M=()=>()=>{},D=e=>{let t,a,n;let i=(0,s.c)(5),{children:r}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>!1,a=()=>!0,i[0]=t,i[1]=a):(t=i[0],a=i[1]);let o=(0,l.useSyncExternalStore)(M,t,a);return i[2]!==o||i[3]!==r?(n=o?null:r(),i[2]=o,i[3]=r,i[4]=n):n=i[4],n},O=()=>"navigator"in window,L=()=>O()&&"setAppBadge"in navigator,T=()=>O()&&navigator.vendor.startsWith("Apple"),W={initial:"bg-[#bde8ff]",denied:"bg-[#f3999d]",installed:"bg-[#bdffd4]",unsupported:"bg-[#feaf82]"},z=e=>{let t,a,l,i,r,o,d;let c=(0,s.c)(15);c[0]!==e?({className:i,onClick:l,type:t,state:a,...r}=e,c[0]=e,c[1]=t,c[2]=a,c[3]=l,c[4]=i,c[5]=r):(t=c[1],a=c[2],l=c[3],i=c[4],r=c[5]);let p=void 0===t?"button":t,u=W[a],m=l?"cursor-pointer":"cursor-not-allowed";return c[6]!==i||c[7]!==u||c[8]!==m?(o=(0,S.cx)(i,u,m,"mt-2 transform-[rotate(-2deg)] text-xs font-semibold px-3 py-[1px] rounded-xl text-background lowercase"),c[6]=i,c[7]=u,c[8]=m,c[9]=o):o=c[9],c[10]!==r||c[11]!==l||c[12]!==o||c[13]!==p?(d=(0,n.jsx)("button",{...r,onClick:l,className:o,type:p}),c[10]=r,c[11]=l,c[12]=o,c[13]=p,c[14]=d):d=c[14],d},F=()=>{let e,t,a,i,r,o,d,c,p,u,m,f,w,x,h,g;let b=(0,s.c)(39);b[0]===Symbol.for("react.memo_cache_sentinel")?(e={favIcon:{src:I.default.src}},b[0]=e):e=b[0];let{set:v,clear:y,countAsNumber:A,isSupported:B,requestPermission:N}=j(e);b[1]!==v?(t=()=>{let e=setTimeout(()=>v(1),50);return()=>{clearTimeout(e)}},a=[v],b[1]=v,b[2]=t,b[3]=a):(t=b[2],a=b[3]),(0,l.useEffect)(t,a);let{install:k,status:C}=q(),E=B()?"install":C,P=A>99;b[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)("h1",{className:"text-2xl font-bold w-[188px] pb-4",children:"use-app-badge"}),b[4]=i):i=b[4];let _=A>0?"[transform:scale(0.5)_translateX(13px)]":"[transform:scale(0)_translateX(13px)]";b[5]!==_?(r=(0,S.cx)("bg-[#ff0000] inline-block p-5 rounded-full relative [transition:transform_ease-out_0.25s]",_),b[5]=_,b[6]=r):r=b[6];let M=P?"text-[17px]":"text-2xl";b[7]!==M?(o=(0,S.cx)(M,"font-bold absolute top-0 left-0 w-[40px] h-[40px] flex items-center justify-center"),b[7]=M,b[8]=o):o=b[8];let O=P?"99+":A;return b[9]!==o||b[10]!==O?(d=(0,n.jsx)("div",{className:o,children:O}),b[9]=o,b[10]=O,b[11]=d):d=b[11],b[12]!==r||b[13]!==d?(c=(0,n.jsxs)("div",{className:"relative",children:[i,(0,n.jsx)("div",{className:"absolute top-[-12px] right-[-12px]",children:(0,n.jsx)("div",{className:r,children:d})})]}),b[12]=r,b[13]=d,b[14]=c):c=b[14],b[15]!==N?(p=(0,n.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void N(),children:"Request Permission"}),b[15]=N,b[16]=p):p=b[16],b[17]!==v||b[18]!==A?(u=(0,n.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void v(A+1),children:"Increment Badge Count"}),b[17]=v,b[18]=A,b[19]=u):u=b[19],b[20]!==y?(m=(0,n.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void y(),children:"Clear Badge"}),b[20]=y,b[21]=m):m=b[21],b[22]!==p||b[23]!==u||b[24]!==m?(f=(0,n.jsxs)("div",{className:"flex flex-col gap-y-2 w-[188px] items-start",children:[p,u,m]}),b[22]=p,b[23]=u,b[24]=m,b[25]=f):f=b[25],b[26]!==B?(w=(0,n.jsx)("div",{className:"flex flex-col gap-y-2 w-[188px] items-start pt-4 lowercase h-[40px]",children:(0,n.jsx)(D,{children:()=>(0,n.jsxs)(n.Fragment,{children:["Supported ",B()?"Yes":"No"]})})}),b[26]=B,b[27]=w):w=b[27],b[28]!==c||b[29]!==f||b[30]!==w?(x=(0,n.jsxs)("div",{className:"w-[188px]",children:[c,f,w]}),b[28]=c,b[29]=f,b[30]=w,b[31]=x):x=b[31],b[32]!==E||b[33]!==k||b[34]!==C?(h="loading"!==E?(0,n.jsxs)("div",{className:"w-full flex justify-start pl-[24px] h-[26px]",children:["initial"===E&&(0,n.jsx)(z,{state:"initial",onClick:k,children:"Install Web App to see Demo"}),"denied"===E&&(0,n.jsx)(z,{state:"denied",disabled:!0,children:"Install Prompt Dismissed"}),("install"===E||"install-not-open"===E)&&(0,n.jsx)(z,{state:"installed",disabled:!0,children:"install-not-open"!==C?"Installed":"Installed but Not Open as an App"}),"unsupported"===E&&(0,n.jsx)(z,{state:"unsupported",disabled:!0,children:T()&&L()?"App must be Installed from Safari":"Unsupported Browser"})]}):(0,n.jsx)("div",{className:"w-full flex justify-start pl-[24px] h-[28px]"}),b[32]=E,b[33]=k,b[34]=C,b[35]=h):h=b[35],b[36]!==x||b[37]!==h?(g=(0,n.jsxs)("div",{className:"flex flex-col items-center gap-y-2 py-10 w-[240px]",children:[x,h]}),b[36]=x,b[37]=h,b[38]=g):g=b[38],g}},8200:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let n={src:"/use-app-badge//_next/static/media/favicon.15bea314.ico",height:48,width:48,blurWidth:0,blurHeight:0}}},e=>{var t=t=>e(e.s=t);e.O(0,[511,174,454,744],()=>t(8032)),_N_E=e.O()}]);
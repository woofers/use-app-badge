(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8390:function(e,t,a){Promise.resolve().then(a.t.bind(a,5658,23)),Promise.resolve().then(a.t.bind(a,5469,23)),Promise.resolve().then(a.t.bind(a,5327,23)),Promise.resolve().then(a.bind(a,4964))},4964:function(e,t,a){"use strict";a.d(t,{AppBadge:function(){return E}});var s=a(7573),n=a(7653),l=a(973);let r=()=>Error("Badge API not supported"),i=e=>async()=>{throw r()},o={isAppBadgeSupported:()=>!1,clearAppBadge:i("clearAppBadge"),setAppBadge:i("setAppBadge"),requestAppBadgePermission:async()=>!1},d={isAppBadgeSupported:l.tg,clearAppBadge:l.wk,setAppBadge:l.iw,requestAppBadgePermission:l.cF},c=()=>o,p=()=>d,u=()=>()=>{},f=()=>{},m=function(){let{favIcon:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{favIcon:!1},{setAppBadge:t,clearAppBadge:s,isAppBadgeSupported:i,requestAppBadgePermission:o}=(0,n.useSyncExternalStore)(u,p,c),[d,m]=(0,n.useState)(),[x,h]=(0,n.useState)(0),[b,w]=(0,n.useState)(""),g=!!e,{src:v,badgeColor:y,badgeSize:j,textColor:A,updateMeta:N}=e||{},B=null==N||N,I=(0,n.useCallback)(async()=>{try{let e=await o();return m(e),e}catch(e){throw m(!1),e}},[o]),k=(0,n.useCallback)(()=>{let e=(0,l.RX)();if("unknown"!==e)return"granted"===e;if(void 0===d)throw r();return d},[d]),C=(0,n.useCallback)(async e=>{try{await t(e)}catch(e){if(!g)throw e}h("number"!=typeof e||e)},[g,t]),S=(0,n.useCallback)(async()=>{try{await s()}catch(e){if(!g)throw e}h(0)},[s,g]),E=(0,n.useMemo)(()=>({set:C,clear:S,requestPermission:I,isAllowed:k,isSupported:i,count:x,countAsNumber:Number(x),icon:b}),[C,S,I,k,i,x,b]);return(0,n.useEffect)(()=>()=>{E.clear().catch(f)},[E.clear]),(0,n.useEffect)(()=>{if("granted"!==(0,l.RX)()&&g){if("boolean"!=typeof x&&x<=0){w(v);return}(async()=>{let{generateIconFor:e}=await a.e(151).then(a.bind(a,2151));w(await e({src:v,content:x,badgeColor:y,badgeSize:j,textColor:A}))})().catch(f)}},[g,x,v,y,j,A,k]),(0,n.useEffect)(()=>{let e;if(!g)return;let t=()=>document.querySelector('link[rel="icon"]:not([media])')||{};if(B&&b){let a=t();a&&(void 0===e&&(e=a.href),a.href=b)}return()=>{let a=t();a&&void 0!==e&&(a.href=e)}},[b,B,g]),E};var x=a(6399),h=a(6124);let b={loaded:!1,didPromptInstall:!1,canInstall:!1,install:()=>{},status:"unsupported"},w=b,g=e=>!!e&&"userChoice"in e,v=e=>{let t=()=>{};if(!("BeforeInstallPromptEvent"in window))return w={...w,loaded:!0},t;if("matchMedia"in window&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: window-controls-overlay)").matches)return w={...w,loaded:!0,status:"install"},t;let a=null;"onappinstalled"in window&&(a=setTimeout(()=>{w={...w,status:"install-not-open",loaded:!0,canInstall:!1},e()},350));let s=t=>{"number"==typeof a&&(clearTimeout(a),a=null),g(t)&&!w.canInstall&&(w={...w,loaded:!0,canInstall:!0,status:"initial",install:()=>{let a=async()=>{w={...w,didPromptInstall:!0,loaded:!0};let{outcome:a}=await t.prompt();"dismissed"===a&&(w={...w,status:"denied"}),e()};w.didPromptInstall||a()}},e()),t.preventDefault()},n=()=>{w={...w,loaded:!0,status:"install"},e()};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",n),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",n),w=b}},y=()=>w,j=()=>{let{install:e,loaded:t,status:a}=(0,n.useSyncExternalStore)(v,y,y);return(0,n.useMemo)(()=>({install:e,status:t?a:"loading"}),[e,t,a])},A=()=>()=>{},N=e=>{let{children:t}=e;return(0,n.useSyncExternalStore)(A,()=>!1,()=>!0)?null:t()},B=()=>"navigator"in window,I=()=>B()&&"setAppBadge"in navigator,k=()=>B()&&navigator.vendor.startsWith("Apple"),C={initial:"bg-[#bde8ff]",denied:"bg-[#f3999d]",installed:"bg-[#bdffd4]",unsupported:"bg-[#feaf82]"},S=e=>{let{className:t,onClick:a,type:n="button",state:l,...r}=e;return(0,s.jsx)("button",{...r,onClick:a,className:(0,h.cx)(t,C[l],a?"cursor-pointer":"cursor-not-allowed","mt-2 transform-[rotate(-2deg)] text-xs font-semibold px-3 py-[1px] rounded-xl text-background lowercase"),type:n})},E=()=>{let{set:e,clear:t,countAsNumber:a,isSupported:l,requestPermission:r}=m({favIcon:{src:x.default.src}});(0,n.useEffect)(()=>{let t=setTimeout(()=>e(1),50);return()=>{clearTimeout(t)}},[e]);let{install:i,status:o}=j(),d=l()?"install":o,c=a>99;return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-y-2 py-10 w-[240px]",children:[(0,s.jsxs)("div",{className:"w-[188px]",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold w-[188px] pb-4",children:"use-app-badge"}),(0,s.jsx)("div",{className:"absolute top-[-12px] right-[-12px]",children:(0,s.jsx)("div",{className:(0,h.cx)("bg-[#ff0000] inline-block p-5 rounded-full relative [transition:transform_ease-out_0.25s]",a>0?"[transform:scale(0.5)_translateX(13px)]":"[transform:scale(0)_translateX(13px)]"),children:(0,s.jsx)("div",{className:(0,h.cx)(c?"text-[17px]":"text-2xl","font-bold absolute top-0 left-0 w-[40px] h-[40px] flex items-center justify-center"),children:c?"99+":a})})})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-2 w-[188px] items-start",children:[(0,s.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void r(),children:"Request Permission"}),(0,s.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void e(a+1),children:"Increment Badge Count"}),(0,s.jsx)("button",{className:"text-accent cursor-pointer lowercase",onClick:()=>void t(),children:"Clear Badge"})]}),(0,s.jsx)("div",{className:"flex flex-col gap-y-2 w-[188px] items-start pt-4 lowercase",children:(0,s.jsx)(N,{children:()=>(0,s.jsxs)(s.Fragment,{children:["Supported ",l()?"Yes":"No"]})})})]}),"loading"!==d?(0,s.jsxs)("div",{className:"w-full flex justify-start pl-[24px]",children:["initial"===d&&(0,s.jsx)(S,{state:"initial",onClick:i,children:"Install Web App to see Demo"}),"denied"===d&&(0,s.jsx)(S,{state:"denied",disabled:!0,children:"Install Prompt Dismissed"}),("install"===d||"install-not-open"===d)&&(0,s.jsx)(S,{state:"installed",disabled:!0,children:"install-not-open"!==o?"Installed":"Installed but Not Open as an App"}),"unsupported"===d&&(0,s.jsx)(S,{state:"unsupported",disabled:!0,children:k()&&I()?"App must be Installed from Safari":"Unsupported Browser"})]}):(0,s.jsx)("div",{className:"w-full flex justify-start pl-[24px] h-[26px]"})]})}},6399:function(e,t){"use strict";t.default={src:"/use-app-badge//_next/static/media/favicon.15bea314.ico",height:48,width:48,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[616,293,286,744],function(){return e(e.s=8390)}),_N_E=e.O()}]);